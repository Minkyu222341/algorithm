## 트랜잭션(Transaction)이란?
* 트랜잭션은 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 수행되어야할 일련의 연산들을 의미한다.
  *  SELECT, UPDATE, INSERT, DELETE등 DB의 상태를 변화 시키는 행위

## 트랜잭션의 특징
* Atomicity (원자성)
  * 트랜잭션의 연산은 데이터베이스에 모두 반영하던지 전혀 반영되지 않아야 한다.
  * 즉슨 수행도중 오류가 하나라도 발생하면 저장해 놓았던 이전 상태로 되돌아 가야 한다.
    * 송금하는 도중 상대에게 전달이 되지 않음 (1)
    * 하지만 계좌에서 돈은 이미 빠져나감 (2)
    * 이러한 상황을 방지하기 위하여 문제가 일어났을시 원래의 상태로 되돌린다.
* Consistency (일관성)
  * 일관성은 트랜잭션이 완료된 결괏값이 일관적인 데이터베이스 상태를 유지하는 것을 말한다.
    * 고객 정보가 담겨있는 데이터베이스에 새로운 고객이 등록되면 그 데이터베이스를 참조하는 다른 하위 계층의 데이터베이스도 같은 고객의 세부 정보를 가져와야 한다. 
    * 또는 모든 계좌의 돈은 0원 이상이어야 한다. 라는 무결성 제약이 있다면 이를 위반하는 트랜잭션은 모두 중단되어야 한다.
* Isolation (독립성)
  * 둘 이상의 트랜잭션이 동시에 실행되고 있을 경우 어떤 하나의 트랜잭션이라도 다른 트랜잭션의 연산에 끼어들수 없다.
    * 계좌이체를 하는 도중에 계좌조회를 할 수 없다.
* Durablility (영속성)
  * 트랜잭션이 성공적으로 완료되었을 경우, 결과는 영구적으로 반영되어야 한다.
  * 시스템에 문제가 생겨 종료되더라도 DB에 반영된 값은 그대로 유지되어야한다.
    * 은행에 시스템이 마비되었다가 재개되었을 때 계좌의 금액이 바뀌게 된다면 큰 문제가 될 것이다.

## 롤백과 커밋.

* 롤백(Rollback) 
  * 하나의 트랜잭션 처리가 비정상적으로 종료되면 트랜잭션의 원자성을 위해 해당 트랜잭션에서 작업한 모든 연산을 취소하여 실제 데이터베이스에 반영하지 않는다. 
  * 롤백하고 난 후에는 해당 트랜잭션을 재시작하거나 폐기하여야 한다.
  
* 커밋(Commit)
  * 하나의 트랜잭션 작업이 정상적으로 끝마쳤을 때 커밋을 하게 된다. 
  * 커밋을 해야만 진짜 데이터베이스에 변경사항이 반영되는 것이다. 
  * 하나의 트랜잭션이 정상적으로 끝났다는 것을 알려주는 연산이다. 

## 트랜잭션의 상태
![image](https://user-images.githubusercontent.com/108817236/209545029-cadab7d2-27d7-40bf-97db-81bf78bd6d86.png)
### 활동(Active) 
  * 트랜잭션이 실행중인 상태

### 실패(Failed)
* 트랜잭션 실행에 오류가 발생하여 중단된 상태

### 철회(Aborted)
* 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태

### 부분 완료(Partially Committed)
* 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태

### 완료(Committed)
* 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

---
https://code-lab1.tistory.com/51

https://tecoble.techcourse.co.kr/post/2021-07-11-database-transaction/

https://coding-factory.tistory.com/226
